
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Webrtc Getting Started - 时光 &#149 印记</title>
  <meta name="author" content="erik ge">

  
  <meta name="description" content="开始搭建个可以看代码的环境。 获取代码 官方推荐步骤：
1
2
3
4
$ git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
## Add depot_tools to your PATH
$ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://erikge.com/articles/HelloWebrtc">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="时光 &#149 印记" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"-->
    
<link rel="stylesheet" href="/assets/foundation-icons.css" />


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50514628-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:erikge.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            时光 &#149 印记
        </span>
       
           <span class="blue_dark">
             by erik
           </span>
       
    </a></li>
  <li><a href="/iOS.html">iOS开发</a></li>
  <li><a href="/archives.html">所有文章</a></li>
  <li><a href="/about.html">关于</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Webrtc Getting Started</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-17T13:44:24+08:00" pubdate data-updated="true">May 17<span>th</span>, 2014</time>
        
      </p>
    
    
    <span><font size=".9em" color="#aaa"> <i class="fi-clock"></i> about 16  minutes</font></span>
    
  </header>


<div class="entry-content"><p>开始搭建个可以看代码的环境。</p>

<!--more-->

<h2 id="获取代码">获取代码</h2>

<p>官方推荐步骤：
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone <a href="https://chromium.googlesource.com/chromium/tools/depot_tools.git">https://chromium.googlesource.com/chromium/tools/depot_tools.git</a>
</span><span class='line'><span class="c">## Add depot_tools to your PATH</span>
</span><span class='line'><span class="nv">$ </span>gclient config <a href="http://webrtc.googlecode.com/svn/trunk">http://webrtc.googlecode.com/svn/trunk</a>
</span><span class='line'><span class="nv">$ </span>gclient sync --force
</span></code></pre></td></tr></table></div></figure></p>

<p><code>gclient sync</code>需要下载太多第三方库，很容易失败，搞了很多次都没成功。其实也没有必要都拉全，只获取webrtc自身的代码就可以。用git维护方便看代码时修改，可以只获取最近的代码
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>svn info <a href="http://webrtc.googlecode.com/svn/">http://webrtc.googlecode.com/svn/</a>
</span><span class='line'>git svn clone -s --prefix<span class="o">=</span>svn/ -r <span class="o">[</span>latest-10-version<span class="o">]</span>:HEAD <a href="http://webrtc.googlecode.com/svn/">http://webrtc.googlecode.com/svn/</a>
</span></code></pre></td></tr></table></div></figure></p>

<h2 id="构建过程">构建过程</h2>

<p>官方推荐的构建过程，默认生成对应PC平台的工程文件
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>gclient runhooks --force
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>trunk
</span><span class='line'><span class="c">## Debug:</span>
</span><span class='line'><span class="nv">$ </span>ninja -C out/Debug
</span><span class='line'><span class="c">## Release:</span>
</span><span class='line'><span class="nv">$ </span>ninja -C out/Release
</span></code></pre></td></tr></table></div></figure></p>

<p>可以控制生成不同平台的工程文件，以Android为例
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;target_os = [&#39;android&#39;, &#39;unix&#39;]&quot;</span> &gt;&gt; .gclient
</span><span class='line'><span class="nv">$ </span>gclient sync --nohooks
</span><span class='line'><span class="nv">$ </span><span class="nb">cd </span>trunk
</span><span class='line'><span class="nv">$ </span><span class="nb">source</span> ./build/android/envsetup.sh
</span><span class='line'><span class="nv">$ GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;$GYP_DEFINES OS=android&quot;</span>
</span><span class='line'><span class="nv">$ JAVA_HOME</span><span class="o">=</span>&lt;location of Java SE 6 - JDK&gt;
</span></code></pre></td></tr></table></div></figure></p>

<p>也可以通过修改GYP_GENERATORS，生成Ninja以外的工程文件</p>

<ul>
<li>make for Makefiles</li>
<li>msvs for Visual Studio</li>
<li>msvs-ninja for Visual Studio project building with ninja</li>
<li>xcode for Xcode</li>
</ul>

<h2 id="在ios上运行的步骤">在iOS上运行的步骤</h2>

<p>感谢<a href="http://ninjanetic.com/how-to-get-started-with-webrtc-and-ios-without-wasting-10-hours-of-your-life/">这篇文章</a>，确实节省了我们宝贵的生命。总结主要的步骤如下。</p>

<h3 id="模拟器">模拟器</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>touch makeall-iossim.sh
</span><span class='line'>chmod +x makeall-iossim.sh
</span></code></pre></td></tr></table></div></figure>

<p>makeall-iossim.sh脚本的内容为
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">function </span>fetch<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- fetching webrtc&quot;</span>
</span><span class='line'>gclient config <a href="http://webrtc.googlecode.com/svn/trunk/">http://webrtc.googlecode.com/svn/trunk/</a>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;target_os = [&#39;mac&#39;]&quot;</span> &gt;&gt; .gclient
</span><span class='line'>gclient sync
</span><span class='line'>
</span><span class='line'>sed -i <span class="s2">&quot;&quot;</span> <span class="s1">&#39;$d&#39;</span> .gclient
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;target_os = [&#39;ios&#39;, &#39;mac&#39;]&quot;</span> &gt;&gt; .gclient
</span><span class='line'>gclient sync
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- webrtc has been sucessfully fetched&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrbase<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;build_with_libjingle=1 build_with_chromium=0 libjingle_objc=1&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATORS</span><span class="o">=</span><span class="s2">&quot;ninja&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrsim<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>wrbase
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;$GYP_DEFINES OS=ios target_arch=ia32&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATOR_FLAGS</span><span class="o">=</span><span class="s2">&quot;$GYP_GENERATOR_FLAGS output_dir=out_sim&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_CROSSCOMPILE</span><span class="o">=</span>1
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrmac<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>wrbase
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;$GYP_DEFINES OS=mac target_arch=x64&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATOR_FLAGS</span><span class="o">=</span><span class="s2">&quot;$GYP_GENERATOR_FLAGS output_dir=out_mac&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>build<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- building webrtc&quot;</span>
</span><span class='line'><span class="nb">pushd </span>trunk
</span><span class='line'>gclient runhooks
</span><span class='line'>ninja -C out_sim/Debug iossim AppRTCDemo
</span><span class='line'><span class="nb">popd</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- webrtc has been sucessfully built&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>run<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- running webrtc appdemo&quot;</span>
</span><span class='line'><span class="nb">pushd </span>trunk
</span><span class='line'>./out_sim/Debug/iossim out_sim/Debug/AppRTCDemo.app
</span><span class='line'><span class="nb">popd</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>fail<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;*** webrtc build failed&quot;</span>
</span><span class='line'><span class="nb">exit </span>1
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>fetch <span class="o">||</span> fail
</span><span class='line'>wrsim <span class="o">||</span> fail
</span><span class='line'>build <span class="o">||</span> fail
</span><span class='line'>run <span class="o">||</span> fail
</span></code></pre></td></tr></table></div></figure>
然后执行该脚本就可以编译、运行。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>./makeall-iossim.sh
</span></code></pre></td></tr></table></div></figure>
接下来如何玩呢？正常情况下，iOS的模拟器已经自动弹出，并启动了测试程序，然后可以按以下步骤体验下视频通话：
1. 打开PC或者android上的Chrome浏览器
2. 访问<a href="http://apprtc.appspot.com%E3%80%82%E5%8F%AF%E6%83%9C%E8%A2%AB%E5%A2%99%E4%BA%86%EF%BC%8C%E6%83%B3%E5%8A%9E%E6%B3%95%E7%BF%BB%E5%A2%99%E5%90%A7%EF%BC%8Csign%E3%80%82%E3%80%82%E3%80%82">http://apprtc.appspot.com。可惜被墙了，想办法翻墙吧，sign。。。</a>
3. 浏览器里的地址发生变化时，获得房间号成功。这时URL类似<a href="http://apprtc.appspot.com?r=34576398%EF%BC%8C%E8%BF%99%E9%87%8C34576398%E4%B8%BA%E6%88%BF%E9%97%B4%E5%8F%B7">http://apprtc.appspot.com?r=34576398，这里34576398为房间号</a>
4. 在iOS模拟器上运行的测试程序中，输入上一步获得的房间号（34576398），便可以体验了</p>

<h3 id="真机">真机</h3>

<p>将生成的app安装到真机上时，需要用到<a href="https://github.com/libimobiledevice/ideviceinstaller">ideviceinstaller</a>。可以通过<a href="http://brew.sh/">HomeBrew</a>安装。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>brew install ideviceinstaller --HEAD
</span></code></pre></td></tr></table></div></figure>
其他的和模拟器类似：
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>touch makeall-iosdevice.sh
</span><span class='line'>chmod +x makeall-iosdevice.sh
</span></code></pre></td></tr></table></div></figure>
makeall-iosdevice.sh脚本的内容为
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="k">function </span>fetch<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- fetching webrtc&quot;</span>
</span><span class='line'>gclient config <a href="http://webrtc.googlecode.com/svn/trunk/">http://webrtc.googlecode.com/svn/trunk/</a>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;target_os = [&#39;mac&#39;]&quot;</span> &gt;&gt; .gclient
</span><span class='line'>gclient sync
</span><span class='line'>
</span><span class='line'>sed -i <span class="s2">&quot;&quot;</span> <span class="s1">&#39;$d&#39;</span> .gclient
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;target_os = [&#39;ios&#39;, &#39;mac&#39;]&quot;</span> &gt;&gt; .gclient
</span><span class='line'>gclient sync
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- webrtc has been sucessfully fetched&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrbase<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;build_with_libjinglth_chromium=0 libjingle_objc=1&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATORS</span><span class="o">=</span><span class="s2">&quot;ninja&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrios<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>wrbase
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;$GYP_DEFINES OS=ios target_arch=armv7&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATOR_FLAGS</span><span class="o">=</span><span class="s2">&quot;$GYP_GENERATOR_FLAGS output_dir=out_ios&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_CROSSCOMPILE</span><span class="o">=</span>1
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>wrmac<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>wrbase
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_DEFINES</span><span class="o">=</span><span class="s2">&quot;$GYP_DEFINES OS=mac target_arch=x64&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">GYP_GENERATOR_FLAGS</span><span class="o">=</span><span class="s2">&quot;$GYP_GENERATOR_FLAGS output_dir=out_mac&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>buildios<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- building webrtc ios&quot;</span>
</span><span class='line'><span class="nb">pushd </span>trunk
</span><span class='line'>wrios <span class="o">&amp;&amp;</span> gclient runhooks <span class="o">&amp;&amp;</span> ninja -C out_ios/Debug-iphoneos AppRTCDemo
</span><span class='line'><span class="nb">popd</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- webrtc has been sucessfully built&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>launch<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- launching on device&quot;</span>
</span><span class='line'>ideviceinstaller -i trunk/out_ios/Debug-iphoneos/AppRTCDemo.app
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;-- launch complete&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">function </span>fail<span class="o">()</span> <span class="o">{</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;*** webrtc build failed&quot;</span>
</span><span class='line'><span class="nb">exit </span>1
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="c">#fetch || fail</span>
</span><span class='line'>wrios <span class="o">||</span> fail
</span><span class='line'>buildios <span class="o">||</span> fail
</span><span class='line'>launch <span class="o">||</span> fail
</span></code></pre></td></tr></table></div></figure></p>

<h3 id="可能会遇到的问题">可能会遇到的问题</h3>

<h4 id="codesigning">Codesigning</h4>

<p>签名时，webrtc脚本（gyp）会查找本机钥匙串，寻找和“iPhone developer”相符的证书。如果没有证书或者有多个证书都会出现异常。
如果没有证书，需要向Apple申请一个。
当有多个证书时，可以通过<code>security find-identity</code>查看所有匹配的证书，然后选择一个合适的，在trunk/build/common.gypi的‘CODE_SIGN_IDENTITY’中修改。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># iOS SDK wants everything for device signed</span>
</span><span class='line'>‘CODE_SIGN_IDENTITY<span class="o">[</span><span class="nv">sdk</span><span class="o">=</span>iphoneos*<span class="o">]</span>‘: ‘iPhone Developer’ <span class="c"># 修改前</span>
</span><span class='line'>‘CODE_SIGN_IDENTITY<span class="o">[</span><span class="nv">sdk</span><span class="o">=</span>iphoneos*<span class="o">]</span>‘: ‘iPhone Developer: Jason Adams <span class="o">(</span>SZ2V5SDF5DF<span class="o">)</span>’ <span class="c"># 修改后</span>
</span></code></pre></td></tr></table></div></figure>
测试工程的默认bound ID是com.google.AppRTCDemo，可以通过修改trunk/talk/examples/objc/AppRTCDemo/ios/Info.plist文件，改成正确的。<br>
如果还有错误，可以看看证书和provisioning profile文件是否匹配。</p>

<h2 id="todo">TODO</h2>

<p>AppRTCDemo test project - trunk/talk/examples/objc</p>

<p>This is the demo application with the high level communication logic and UI</p>

<p>Objective-C WebRTC libraries – trunk/talk/app/webrtc/objc</p>

<p>These are the Objective-C wrappers to the core communication libraries.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">erik ge</span></span>

      








  


<time datetime="2014-05-17T13:44:24+08:00" pubdate data-updated="true">May 17<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/categories/webrtc/'>webrtc</a>
  
</span>


    </p>
    <p class="meta">
        版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" id="">BY-NC-ND 3.0</a>
    </p>
    <div class="sharing">
    <style>
        .flash-video{display:none;}
    </style>
  
  
  
  

<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_weixin">微信</a>
	<a class="jiathis_button_tsina">新浪微博</a>
	<a class="jiathis_button_tqq">腾讯微博</a>
	<a class="jiathis_button_qzone">QQ空间</a>
	<a class="jiathis_button_douban">豆瓣</a>
	<a class="jiathis_button_xqw">雪球</a>
	<a href="http://www.jiathis.com/share?uid=1923944" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
    var jiathis_config = {data_track_clickback:'true'};
    </script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1394075736790327" charset="utf-8"></script>
<!-- JiaThis Button END -->



</div>

    <br />
    


<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1923944"></script>
<!-- UY END -->



    <br />
    <p class="meta">
      
        <a class="basic-alignment left" href="/articles/HelloGyp" title="Previous Post: Hello GYP">&laquo; Hello GYP</a>
      
      
        <a class="basic-alignment right" href="/articles/DoubangoGettingStarted" title="Next Post: Doubango Getting Started">Doubango Getting Started &raquo;</a>
      
    </p>
  </footer>
</article>


</div>

<aside class="sidebar">
  
    <section id="menuIndex">
    <h1>Contents</h1>
    <script src="/javascripts/article_outline.js" type="text/javascript"></script>
</section>




<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/articles/SwiftResSummary">Swift资源汇总</a>
      </li>
    
      <li class="post">
        <a href="/articles/DoubangoGettingStarted">Doubango Getting Started</a>
      </li>
    
      <li class="post">
        <a href="/articles/HelloWebrtc">Webrtc Getting Started</a>
      </li>
    
      <li class="post">
        <a href="/articles/HelloGyp">Hello GYP</a>
      </li>
    
      <li class="post">
        <a href="/articles/HelloCMake">Hello CMake</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Categories</h1>
    <ul>
        
        
        <li><a class='category' href='/categories/web/'>web (4)</a></li>
        
        
        
        <li><a class='category' href='/categories/life/'>life (1)</a></li>
        
        
        
        <li><a class='category' href='/categories/ios/'>iOS (2)</a></li>
        
        
        
        <li><a class='category' href='/categories/build/'>build (3)</a></li>
        
        
        
        <li><a class='category' href='/categories/webrtc/'>webrtc (1)</a></li>
        
        
    </ul>
</section>






<section>
    <!--a data-type="3" data-tmpl="200x200" data-tmplid="197" data-rd="2" data-style="2" data-border="1" href="#"></a-->
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><!-- UJian Button BEGIN -->
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?type=slide&fade=1&uid=1923944"></script>
<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
<!-- UJian Button END -->


<p>
  Copyright &copy; 2014 - erik ge -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  <!-- Included file 'disqus.html' not found in _includes directory
Included file 'facebook_like.html' not found in _includes directory
Included file 'google_plus_one.html' not found in _includes directory
Included file 'twitter_sharing.html' not found in _includes directory -->



</body>
</html>
