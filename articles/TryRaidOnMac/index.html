<!DOCTYPE html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>尝试了下RAID | erikge.com</title>
    <meta name="author" content="erikge" />
    <meta name="description" content="erikge's Blog" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
    
    <link rel="stylesheet" href="/assets/css/foundation.min.css" />
    <link rel="stylesheet" href="/assets/foundation-icons.css" />
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/assets/css/syntax.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/assets/css/overrides.css" />
    <script src="/assets/js/modernizr.js"></script>
    
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/assets/atom.xml" />
    
    <!-- article outline -->
    <link rel="stylesheet" href="/assets/css/article_outline.css" type="text/css" />
    <script src="/assets/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    
  </head>
    <body>
      <!-- Header and Nav -->
  
      <div class="row">
          <div class="home-menu">
              <div class="home-icon-con">
                  <a class="home-menu-icon" href="/">erikge</a>
              </div>
          </div>
        <div class="large-9 columns">
          <nav role="navigation">
            <ul class="inline-list right">
              <li><a href="/index.html">Home</a></li>
              <li><a href="/index.html">Category</a></li>
              <li><a href="/index.html">About</a></li>
            </ul>
          </nav>
        </div>
      </div>
  <div class="row">
      
    <!-- Main Content Section -->
<!-- This has been source ordered to come first in the markup (and on small devices) but to be to the right of the nav on larger screens -->
<div class="large-8 medium-8 push-1 columns entry">
    
<article class="hentry post" role="main">
  <header>
    <h1 class="entry-title">尝试了下RAID</h1>
    <div class="entry-meta">
      <span class="entry-date date published updated"><time datetime="2014-02-11T00:00:00+08:00">2014 February 11 at 00:00  </time></span>
      
      <span rel="tag">
        
          
            <a href="/categories/life/index.html">life</a>
          
        
      </span>
      
    </div>
  </header>
  <div class="entry-content">
    <p>随着各种电子产品的使用，要存储的东西越来越多。开始就是存在电脑里，后来电脑旧了坏了，换电脑，也不止一台电脑了，数据就存移动硬盘里。再后来，电脑似乎也不那么常用了，就换成各种跨平台的app，自动在各种终端上同步数据。</p>
<p><!--more--></p>
<p>体积比较大的文件也可以存到各种网盘、云盘里了。但是，最珍贵、最想保存下来的，就是这么多年来的照片了，满满的都似乎回忆。而这些照片往往不太愿意放到网上去，毕竟是自己的私人数据，还是不太相信没有底线的互联网，即便是有各种加密，自己设置的密码也不一定靠的住。所以，我一直还是存在两块移动硬盘里，还是身边的柜子她是些。唯一的问题是，两块硬盘上的数据我是没仔细同步的，自己也搞不清楚那个是数据最完整的了。</p>
<p>还好，最近听说了RAID可以在电脑上通过软件实现，所以再次开启折腾之路。</p>
<h2><span class="caps">RAID</span></h2>
<p>RAID，Redundant Array of Inexpensive Disks，廉价磁盘冗余阵列。通过多个磁盘的组合提高数据可靠性、访问速度等。</p>
<ul>
	<li><span class="caps">RAID</span> 0: 磁盘串联，无冗余，磁盘利用率高，读写速度快，最少两块硬盘</li>
	<li><span class="caps">RAID</span> 1: 镜像，磁盘利用率低，读速度快，写速度稍慢，最少两块硬盘</li>
	<li><span class="caps">RAID</span> 2: 汉明码校验，冗余多，读写速度慢，最少三块硬盘</li>
	<li><span class="caps">RAID</span> 3:</li>
	<li><span class="caps">RAID</span> 4:</li>
	<li><span class="caps">RAID</span> 5: 最有用的方案（对企业来说），RAID 0 和 <span class="caps">RAID</span> 1 的折中，最少三块硬盘</li>
	<li><span class="caps">RAID</span> 6:</li>
	<li><span class="caps">RAID</span> 7:</li>
	<li><span class="caps">RAID</span> 10: 先组成RAID 1，再在RAID1的基础上组成RAID 0，常用。</li>
	<li><span class="caps">RAID</span> 01: 顺序和RAID 10相反，不常用。</li>
</ul>
<h2><span class="caps">MAC</span> OS 上的软件实现</h2>
<p>据说有RAID卡的硬件实现，不过偶银子紧张，只好寻找软件实现。目前找到的比较好的软件有两个，系统自带的Disk Utility和SoftRAID。</p>
<h3>Disk Utility</h3>
<p>打开“实用工具”中的“磁盘工具”，通过“RAID”的标签创建即可。软件有说明，创建成功并不复杂。<br />
如果不是用整块磁盘创建RAID，而是用分区创建RAID，创建过程中可能会遇到如下错误：</p>
<blockquote>
<p>无法将磁盘“XXX”添加到RAID磁盘阵列，因为此宗卷所在的磁盘以“主引导记录”为分区图方案。此分区图方案不被支持。</p>
</blockquote>
<p>这是因为磁盘是MBR分区方式，需要改成GPT分区方式。可以在磁盘工具的“分区”重新为磁盘分区，分区时选择“选项”，分区方案选择“GUID分区表”。</p>
<h3>Disk Utility 缺点</h3>
<p>论坛里有人说，DU是系统自带的，稳定省事，而且个人用也足够了。还是不能盲目相信啊，稳定确实是稳定，但是不一定够用。<br />
我有两块移动硬盘，保存照片时作为RAID使用，但是希望也可以单独使用，后续有机会再组合为RAID同步数据。移动硬盘上还有不组合为RAID的分区，大多时候移动硬盘还是需要单独使用。所以，简单说，我要求RAID可以随意拆分和组合。<br />
DU的缺点：</p>
<ul>
	<li>DU创建的RAID不能分开用</li>
	<li>重建时间太漫长</li>
	<li>据说出现磁盘错误，DU不会报警。这个可以通过&quot;RaidEye&quot;:http://www.hanynet.com/raideye/ 解决</li>
</ul>
<p>创建好RAID之后，我单独使用一块移动硬盘，然后拔下来换另一个，反复几次之后，DU里RAID的状态从丢失，变成故障，然后就再也回不去了。还有一个不能忍受的是，我几乎没有修改任何内容，重建（rebuild）也需要一天之久，最短的时间也在三小时以上，这。。。无法接受。。。</p>
<h3>SoftRAID</h3>
<p>于是，只能尝试SoftRAID。<br />
SoftRAID也并不难使用，要注意的是SoftRAID需要装自己的磁盘驱动，然后需要创建自己的分区才能实现各种功能。自己摸索一阵子，掌握各种功能应该不难。<br />
SoftRAID最可爱的地方：</p>
<ul>
	<li>重建真快，文件变化不大时20s内搞定，增量重建</li>
	<li>可以分开使用，将Secondary的分区转换为Read-only Secondary</li>
</ul>
<p>开始以为不能分开用，因为我把作为Secondary的磁盘单独插上后，再两个磁盘都插进去就无法组建RAID了，一直是两个同名的分区。后来研究文档发现，SoftRAID的RAID工作时必须要有一个作为Primary的磁盘的，如果没有的话，就会将Secondary转换为Primary。一个work around的方法是将Secondary的分区转换为Read-only Secondary，需要同步时再转换回来。</p>
<h3>SoftRAID 缺点</h3>
<p>正当我满心欢喜，就准备这么干时，SoftRAID卡死了。在我做一个删除分区的操作时，SoftRAID没有反应了。而且dmg格式的文件也大不开了。我意识到SoftRAID把磁盘操作程序弄坏了。我准备重启，悲剧的是，电脑竟然关不了机了，我只好把Mac像该死的windows一样断电了。<br />
后来这种情况又在别的操作的时候出现了几次，我开始不信任SoftRAID了，不敢将珍贵的照片交给SoftRAID。</p>
<p>$129可以省了。</p>
<h2>美好的RAID</h2>
<p>如此折腾了两天，RAID还只是想象中那么美好啊。别人盲目推崇的东西不一定能妥善的解决自己的问题，还是要多测试。<br />
试验RAID的过程中知道了CCC，还是这货好用，先用着这个解决问题，暂时不碰RAID了。</p>
  </div>
  <i class="fi-price-tag"></i><span class="entry-meta" rel="tag"> </span>

  
  <div class="share-buttons">
    <!--div class="share-icon twitter-share">
      <a href="https://twitter.com/share" class="twitter-share-button" data-via="ThatAmyMac" data-lang="en">Tweet</a>
    </div-->
    <div class="share-icon">
      <div class="fb-share-button" data-type="button_count" style="vertical-align: none"></div>
    </div>
    <div class="share-icon">
      <div class="g-plus" data-action="share" data-annotation="bubble"></div>
    </div>
    <div class="share-icon">
      <a href="http://www.tumblr.com/share/link?url=/articles/TryRaidOnMac&name=尝试了下RAID" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; padding: 0 10px; width:81px; height:20px; background:url('http://platform.tumblr.com/v1/share_1.png') top left no-repeat transparent;">Share on Tumblr</a>
    </div>
    <div class="share-icon">
      <script type="IN/Share" data-counter="right"></script>
    </div>
  </div>
  

  
  <hr />
    <section id="disqus_thread"></section>
  
</article>

</div>

<div class="large-6 medium-6 push-3 columns" id="content">
    
<script src="/assets/js/article_outline.js" type="text/javascript"></script>

</div>

    
    <!-- Nav Sidebar -->
    <!-- This is source ordered to be pulled to the left on larger screens -->
    <!--
    <div class="large-3 medium-3 pull-9 columns">
        
      <blockquote>Art is never finished, only abandoned.<cite>Leonardo Da Vinci</cite></blockquote>
      
      <p><img src="/images/amymac.jpg" alt="Amy MacKinnon" title="Photo by Michael O'Donnell"/></p>

      <h3>Everywhere Else</h3>
      <a href="http://www.behance.net/amy_mac" class="webicon behance">Behance</a>
      <a href="http://www.flickr.com/photos/amy_sloan/" class="webicon flickr">Flickr</a>
      <a href="https://github.com/amy-mac" class="webicon github" rel="me">Github</a>
      <a href="http://www.linkedin.com/in/amymsloan" class="webicon linkedin">Linked In</a>
      <a href="http://www.rdio.com/people/amy_mackinnon/" class="webicon rdio">Rdio</a>
      <a href="http://amysloan.tumblr.com/" class="webicon tumblr">Tumblr</a>
      <a href="https://twitter.com/thatamymac" class="webicon twitter" rel="me">Twitter</a>
      <a href="http://www.youtube.com/user/morriganjett" class="webicon youtube">Youtube</a>
    </div>
     -->
    
  </div>

  <!-- Footer -->
  
  <footer class="row">
    <div class="large-12 columns">
      <hr />
      <div class="row">
        <div class="large-6 columns">
          <p>Copyright © 2013&ndash;2014 Erik Ge</p>
        </div>
        <div class="large-6 columns">
          <nav role="navigation">
            <ul class="inline-list right">
                <li><a href="/index.html">Home</a></li>
                <li><a href="/index.html">Category</a></li>
                <li><a href="/index.html">About</a></li>
            </ul>
          </nav>
        </div>
      </div>
    </div> 
  </footer>

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
    
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'erikge'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
     var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
     dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
     (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
     
     /* * * DON'T EDIT BELOW THIS LINE * * */
     (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
     
    </script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <!-- Twitter Share Button -->
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<!-- Facebook Share Button -->
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=139738486099462";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<script src="https://apis.google.com/js/plusone.js"></script>
<script src="http://platform.tumblr.com/v1/share.js"></script>
<script src="http://platform.linkedin.com/in.js" type="text/javascript"></script>
    <!-- TODO 代码统计 -->
<script type="text/javascript">
    
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'TODO-UA-18603607-1']);
    _gaq.push(['_setDomainName', 'erikge.com']);
    _gaq.push(['_trackPageview']);
    
    (function() {
     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
     })();
     
    </script>

    </body>
</html>
