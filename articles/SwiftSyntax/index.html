
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Swift的语法细节 - 时光 &#149 印记</title>
  <meta name="author" content="erik ge">

  
  <meta name="description" content="Swift类似脚本语言的高级语法特性，让Swift语言使用起来很直观，很符合人的直觉，整体感觉很简洁很舒服。使用不同编程语言的程序员都能找到熟悉的感觉，这种亲切感必将吸引更多的开发者。
除去那些显而易见的语法，本文总结一些略显奇怪的语法，作为开发中的参考。 变量名和常量名 变量名、 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://erikge.com/articles/SwiftSyntax">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="时光 &#149 印记" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"-->
    
<link rel="stylesheet" href="/assets/foundation-icons.css" />


  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50514628-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:erikge.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            时光 &#149 印记
        </span>
       
           <span class="blue_dark">
             by erik
           </span>
       
    </a></li>
  <li><a href="/iOS.html">iOS开发</a></li>
  <li><a href="/archives.html">所有文章</a></li>
  <li><a href="/about.html">关于</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Swift的语法细节</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-26T14:09:50+08:00" pubdate data-updated="true">Jun 26<span>th</span>, 2014</time>
        
      </p>
    
    
    <span><font size=".9em" color="#aaa"> <i class="fi-clock"></i> about 27  minutes</font></span>
    
  </header>


<div class="entry-content"><p>Swift类似脚本语言的高级语法特性，让Swift语言使用起来很直观，很符合人的直觉，整体感觉很简洁很舒服。使用不同编程语言的程序员都能找到熟悉的感觉，这种亲切感必将吸引更多的开发者。<br>
除去那些显而易见的语法，本文总结一些略显奇怪的语法，作为开发中的参考。</p>

<!--more-->

<h2 id="变量名和常量名">变量名和常量名</h2>

<p>变量名、常量名可以使用Unicode字符，但不能包含连线符、制表符、数学符号、箭头和一些保留字符。
如果非要使用保留字符（如关键字）作为变量名，通过反引号（`）将字符包围（如`class`）。</p>

<h2 id="注释">注释</h2>

<p>注释可以嵌套，这样注释大段代码就方便了，只管开头结尾就好，不用担心里面的注释结束符捣乱了。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">/*</span> <span class="err">这是第一个多行注释的开头</span>
</span><span class='line'><span class="n">code</span> <span class="n">here</span>
</span><span class='line'><span class="o">/*</span> <span class="err">这是第二个被嵌套的多行注释</span> <span class="o">*/</span>
</span><span class='line'><span class="n">more</span> <span class="n">code</span> <span class="n">here</span>
</span><span class='line'><span class="err">这是第一个多行注释的结尾</span> <span class="o">*/</span>
</span></code></pre></td></tr></table></div></figure>

<h2 id="有关数值的操作">有关数值的操作</h2>

<p>整数字面量可以是十进制、二进制、八进制、十六进制
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">let</span> <span class="n">decimalInteger</span> <span class="o">=</span> <span class="mi">17</span>
</span><span class='line'><span class="n">let</span> <span class="n">binaryInteger</span> <span class="o">=</span> <span class="mi">0</span><span class="n">b10001</span>     <span class="o">//</span> <span class="err">二进制的</span> <span class="mi">17</span>
</span><span class='line'><span class="n">let</span> <span class="n">octalInteger</span> <span class="o">=</span> <span class="mi">0</span><span class="n">o21</span>         <span class="o">//</span> <span class="err">八进制的</span><span class="mi">17</span>
</span><span class='line'><span class="n">let</span> <span class="n">hexadecimalInteger</span> <span class="o">=</span> <span class="mh">0x11</span>   <span class="o">//</span> <span class="err">十六进制的</span> <span class="mi">17</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>浮点字面量可以是十进制、十六进制。小数点两边必须有至少一个数字。有可选的指数，十进制为e、十六进制为p。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">let</span> <span class="n">decimalDouble</span> <span class="o">=</span> <span class="mf">12.1875</span>
</span><span class='line'><span class="n">let</span> <span class="n">exponentDouble</span> <span class="o">=</span> <span class="mf">1.21875e1</span>  <span class="o">//</span> <span class="err">十进制指数的</span><span class="mf">12.1875</span>
</span><span class='line'><span class="n">let</span> <span class="n">hexadecimalDouble</span> <span class="o">=</span> <span class="mh">0xC</span><span class="o">.</span><span class="mi">3</span><span class="n">p0</span> <span class="o">//</span> <span class="err">十六进制指数的</span><span class="mf">12.1875</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>可以添加下划线提高可读性，不影响字面量的值。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">let</span> <span class="n">paddedDouble</span> <span class="o">=</span> <span class="mf">000123.456</span>
</span><span class='line'><span class="n">let</span> <span class="n">oneMillion</span> <span class="o">=</span> <span class="mi">1</span><span class="n"><em>000_000</span>
</span><span class='line'><span class="n">let</span> <span class="n">justOverOneMillion</span> <span class="o">=</span> <span class="mi">1</span><span class="n"></em>000_000</span><span class="o">.</span><span class="mo">000</span><span class="n">_000_1</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>可以通过typealias给类型起个更喜欢的别名，如<code>typealias AudioSample = UInt16</code>，这时AudioSample等价于UInt16。</p>

<p>\% 为 求余运算符 或 取模运算符，可以对负数和浮点数操作。被求余数的符号被忽略。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="mi">9</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">//</span> <span class="err">等于</span><span class="mi">1</span>
</span><span class='line'><span class="mi">9</span> <span class="o">%</span> <span class="o">-</span><span class="mi">4</span> <span class="o">//</span> <span class="err">和</span> <span class="mi">9</span> <span class="o">%</span> <span class="mi">4</span> <span class="err">等价，等于</span><span class="mi">1</span>
</span><span class='line'><span class="o">-</span><span class="mi">8</span> <span class="o">%</span> <span class="mf">2.5</span> <span class="o">//</span> <span class="err">等于</span><span class="o">-</span><span class="mf">0.5</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>区间运算符，<code>a...b</code>表示从a到b(包括 a 和 b)的所有值的闭区间；<code>a..b</code>表示包括a不包括b的前闭后开区间。</p>

<h2 id="字符和字符串">字符和字符串</h2>

<p>字符串字面量可以包含一下特殊字符：</p>

<ol>
<li>转义特殊字符 <code>\0 (空字符)、\\(反斜线)、\t (水平制表符)、\n (换行符)、\r (回车符)、\&quot; (双
引号)、\&#39; (单引号)</code>。
2.单字节 Unicode 标量，写成<code>\xnn</code>,其中 nn 为两位十六进制数。
3.双字节 Unicode 标量，写成<code>\unnnn</code>,其中 nnnn 为四位十六进制数。
4.四字节 Unicode 标量，写成<code>\Unnnnnnnn</code>,其中 nnnnnnnn 为八位十六进制数。</li>
</ol>

<p>空字符串定义，二者等价
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">empty1</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
</span><span class='line'><span class="n">var</span> <span class="n">empty2</span> <span class="o">=</span> <span class="n">String</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>字符串可以通过“＋”拼接，两个Character可以相加得到String。
字符串String可以作为字符Character的集合，可以对其用for-in操作，如 <code>for character in &quot;Dog!???&quot;</code>。</p>

<p>计算字符串中字符的数量，通过全局countElements函数实现。<br>
计算字符串的字节数，可以考虑 utf16count * 2 得到。</p>

<p>字符串比较。可以通过<code>==</code>判断两个字符串包含的字符是否完全相同，通过hasPrefix/hasSuffix判断前缀/后缀是否相等。</p>

<p>可以通过uppercaseString/lowercaseString获得大写/小写版本。<br>
可以通过utf8获得UTF-8单元集合。<br>
可以通过utf16获得UTF-16单元集合。<br>
可以通过unicodeScalars获得21位的标量值集合。</p>

<h2 id="集合类型">集合类型</h2>

<p>Swift提供了数组和字典两种集合类型。</p>

<h3 id="数组">数组</h3>

<p>数组是类型安全的，要求有明确的类型，其中包含的元素的类型必须统一。</p>

<p>数组的定义
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">arrSimple</span><span class="p">:</span> <span class="n">String</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">var</span> <span class="n">arrComp</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">var</span> <span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">]</span> <span class="o">//</span> <span class="err">依赖类型推断</span>
</span><span class='line'><span class="o">//</span> <span class="err">定义空数组</span>
</span><span class='line'><span class="n">var</span> <span class="n">emptySimple</span><span class="p">:</span> <span class="n">String</span><span class="p">[]</span> <span class="o">=</span> <span class="n">String</span><span class="p"><a href=""></a></span>
</span><span class='line'><span class="n">var</span> <span class="n">emptyComp</span><span class="p">:</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">Array</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">()</span>
</span><span class='line'><span class="n">var</span> <span class="n">emptyNotOK</span> <span class="o">=</span> <span class="p">[]</span> <span class="o">//</span> <span class="err">未说明类型，后续无法使用</span>
</span><span class='line'><span class="n">emptySimple</span> <span class="o">=</span> <span class="p">[]</span> <span class="o">//</span> <span class="err">类型已知的情况下，可以用于变为空数组</span>
</span><span class='line'><span class="o">//</span> <span class="err">用重复的值初始化数组</span>
</span><span class='line'><span class="n">var</span> <span class="n">threeDoubles</span> <span class="o">=</span> <span class="n">Double</span><span class="p"><a href="/span%3E%3Cspan%20class=%22n%22%3Ecount%3C/span%3E%3Cspan%20class=%22p%22%3E:%3C/span%3E%20%3Cspan%20class=%22mi%22%3E3%3C/span%3E%3Cspan%20class=%22p%22%3E,%3C/span%3E%20%3Cspan%20class=%22n%22%3ErepeatedValue%3C/span%3E%3Cspan%20class=%22p%22%3E:%3C/span%3E%3Cspan%20class=%22mf%22%3E0.0%3C/span%3E%3Cspan%20class=%22p%22"></a></span>
</span><span class='line'><span class="n">var</span> <span class="n">anotherThreeDoubles</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">count</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">repeatedValue</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">)</span> <span class="o">//</span> <span class="err">不指定类型，依赖类型推断</span>
</span><span class='line'><span class="o">//</span> <span class="n">copy</span><span class="err">创建</span>
</span><span class='line'><span class="n">var</span> <span class="n">arr_new</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="n">arr_old</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>数组的使用
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">String</span><span class="p"><a href=""></a></span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">count</span> <span class="o">//</span> <span class="err">内部元素数量</span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">isEmpty</span>
</span><span class='line'><span class="o">//</span> <span class="err">最后添加元素</span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot;newValue&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">arr</span> <span class="o">+=</span> <span class="p">[</span><span class="s">&quot;newValue1&quot;</span><span class="p">,</span> <span class="s">&quot;newValue2&quot;</span><span class="p">]</span>
</span><span class='line'><span class="o">//</span> <span class="err">将数组中的一段替换为新值，被替换的部分的长度和新值的长度可以不一致</span>
</span><span class='line'><span class="n">arr</span><span class="p">[</span><span class="mf">1.</span><span class="o">..</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;one&quot;</span><span class="p">,</span> <span class="s">&quot;two&quot;</span><span class="p">,</span> <span class="s">&quot;three&quot;</span><span class="p">,</span> <span class="s">&quot;four&quot;</span><span class="p">]</span>
</span><span class='line'><span class="o">//</span> <span class="err">添加、删除</span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&quot;insertValue&quot;</span><span class="p">,</span> <span class="n">atIndex</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">removeAtIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span class='line'><span class="n">arr</span><span class="o">.</span><span class="n">removeLast</span><span class="p">()</span>
</span><span class='line'><span class="o">//</span> <span class="err">带数组的索引遍历</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">shoppingList</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="s">&quot;Item (index + 1): (value)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">//</span> <span class="err">数组可以相加来合并</span>
</span><span class='line'><span class="n">var</span> <span class="n">arr</span> <span class="o">=</span> <span class="n">arr1</span> <span class="o">+</span> <span class="n">arr2</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>当数组分配给常量时，数组的长度不能改变，但其中的值还可以改变。</p>

<h3 id="字典">字典</h3>

<p>Swift 的字典使用 Dictionary<KeyType, ValueType>定义,其中KeyType要求是可哈希的。</p>

<p>字典的定义
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">airports</span><span class="p">:</span> <span class="n">Dictionary</span><span class="o">&lt;</span><span class="n">String</span><span class="p">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;TYO&quot;</span><span class="p">:</span> <span class="s">&quot;Tokyo&quot;</span><span class="p">,</span> <span class="s">&quot;DUB&quot;</span><span class="p">:</span> <span class="s">&quot;Dublin&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">var</span> <span class="n">airports</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;TYO&quot;</span><span class="p">:</span> <span class="s">&quot;Tokyo&quot;</span><span class="p">,</span> <span class="s">&quot;DUB&quot;</span><span class="p">:</span> <span class="s">&quot;Dublin&quot;</span><span class="p">]</span> <span class="o">//</span> <span class="err">依赖类型推断</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>字典的使用
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">//</span> <span class="err">添加</span>
</span><span class='line'><span class="n">airports</span><span class="p">[</span><span class="s">&quot;LHR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;London&quot;</span>
</span><span class='line'><span class="o">//</span> <span class="err">更新</span>
</span><span class='line'><span class="n">airports</span><span class="p">[</span><span class="s">&quot;LHR&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;London Heathrow&quot;</span>
</span><span class='line'><span class="n">airports</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="s">&quot;London Heathrow&quot;</span><span class="p">,</span> <span class="n">forKey</span><span class="p">:</span><span class="s">&quot;LHR&quot;</span><span class="p">)</span>
</span><span class='line'><span class="o">//</span> <span class="err">遍历</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="n">airportCode</span><span class="p">,</span> <span class="n">airportName</span><span class="p">)</span> <span class="ow">in</span> <span class="n">airports</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;(airportCode): (airportName)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>当字典分配给常量时，大小和其中的键值对都不能更改。</p>

<h2 id="值类型和引用类型">值类型和引用类型</h2>

<p>Swift中的类型可以分为值类型和引用类型。<br>
值类型赋值给变量、常量，或传递给函数参数，或函数返回值时，得到的是新创建的一份拷贝。这样两个变量的后续操作相互独立，不相互影响。<br>
引用类型在代码中传递时，得到的是同一个实例。两个变量的后续操作实际是对同一实例的操作。<br>
引用类似C中的指针、Java中的类对象引用。Swift中也是没有指针、地址等概念的。</p>

<p><strong>值类型：</strong></p>

<ul>
<li>所有的基本类型。整数(Integer)、浮点数(floating-point)、布尔值(Booleans)、字符串(string)、数组(array)和字典(dictionaries)。并且都是以结构体的形式在后台实现。</li>
<li>结构体、枚举。其中包含的任何值类型，在代码中传递时都会被复制。</li>
</ul>

<p><strong>引用类型：</strong></p>

<ul>
<li>类</li>
<li>闭包。闭包包括函数。</li>
</ul>

<p>恒等运算符，判断两个变量、常量是否引用同一个实例的方法。<br>
恒等<code>===</code><br>
不恒等<code>!==</code><br>
在实际开发中，并没有必要因为值拷贝的原因减少赋值等传递。因为在实际编译时，编译器会保证复制只发生在绝对必要的情况下以提高性能</p>

<p>集合类型的传递和拷贝行为略有些复杂。集合类型在传递时，先不做拷贝，只有当值发生变化时才执行拷贝。字典在其中的键－值对改变或size改变时，都认为是发生变化，触发拷贝；但数组在修改其中元素时不认为是发生变化，只有在长度改变时才认为是发生变化，才触发拷贝。
数组长度改变的情况包括附加(appending),插入(inserting),删除(removing)或者使用范围下标(ranged subscript)去替换这一范围内的元素。</p>

<p>集合类型在拷贝时执行的都是浅拷贝。当其中的元素时引用类型时，拷贝的是引用。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>              <span class="o">//</span> <span class="n">true</span><span class="err">，没</span><span class="n">copy</span><span class="err">，</span><span class="n">a</span><span class="err">修改不认为是变化</span>
</span><span class='line'><span class="n">a</span> <span class="o">===</span> <span class="n">b</span>             <span class="o">//</span> <span class="n">false</span><span class="err">，值类型，返回</span><span class="n">false</span><span class="err">符合语法</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mf">1.</span><span class="o">..</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</span><span class='line'><span class="n">a</span> <span class="o">==</span> <span class="n">b</span>              <span class="o">//</span> <span class="n">false</span><span class="err">，发生</span><span class="n">copy</span><span class="err">，</span><span class="n">a</span><span class="err">变化了</span>
</span></code></pre></td></tr></table></div></figure>
触发copy的方法
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">var</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'><span class="n">b</span><span class="o">.</span><span class="n">unshare</span><span class="p">()</span>     <span class="o">//</span> <span class="err">触发</span><span class="n">b</span><span class="err">的</span><span class="n">copy</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>       <span class="o">//</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="o">//</span> <span class="ow">or</span>
</span><span class='line'><span class="n">var</span> <span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
</span><span class='line'><span class="n">var</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span>
</span><span class='line'><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">11</span>       <span class="o">//</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2 id="函数">函数</h2>

<p>多返回值。<br>
函数可以返回多个值，以元组的形式实现。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">getPoint</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">8</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">var</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">getPoint</span><span class="p">()</span>
</span><span class='line'><span class="n">ret</span><span class="o">.</span><span class="n">x</span>
</span><span class='line'><span class="n">ret</span><span class="o">.</span><span class="n">y</span>
</span><span class='line'><span class="n">func</span> <span class="n">getInfo</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">Int</span><span class="p">,</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="s">&quot;Not Found&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">var</span> <span class="n">info</span> <span class="o">=</span> <span class="n">getInfo</span><span class="p">()</span>
</span><span class='line'><span class="n">info</span><span class="o">.</span><span class="mi">0</span>
</span><span class='line'><span class="n">info</span><span class="o">.</span><span class="mi">1</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>外部形参名。<br>
函数形参名分为本地形参名和外部形参名。本地形参名只在函数内部有效，外部形参名用于外部调用时声明。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">join</span><span class="p">(</span><span class="n">string</span> <span class="n">s1</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">toString</span> <span class="n">s2</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">withJoiner</span> <span class="n">joiner</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">s1</span> <span class="o">+</span> <span class="n">joiner</span> <span class="o">+</span> <span class="n">s2</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="n">usage</span>
</span><span class='line'><span class="n">join</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">toString</span><span class="p">:</span> <span class="s">&quot;world&quot;</span><span class="p">,</span> <span class="n">withJoiner</span><span class="p">:</span> <span class="s">&quot;, &quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>
外部形参和本地形参同名。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">join</span><span class="p">(</span><span class="c">#string: String, #toString: String, #withJoiner: String) -&gt; String {</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">string</span> <span class="o">+</span> <span class="n">withJoiner</span> <span class="o">+</span> <span class="n">toString</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">join</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="n">toString</span><span class="p">:</span> <span class="s">&quot;world&quot;</span><span class="p">,</span> <span class="n">withJoiner</span><span class="p">:</span> <span class="s">&quot;, &quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>默认值。<br>
函数形参可以带有默认值，虽然默认值形参可以在任何位置，但是建议放在形参列表的末尾。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">join</span><span class="p">(</span><span class="n">s1</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="n">s2</span><span class="p">:</span> <span class="n">String</span> <span class="o">=</span> <span class="s">&quot;world&quot;</span><span class="p">,</span> <span class="n">jo</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">s1</span> <span class="o">+</span> <span class="n">jo</span> <span class="o">+</span> <span class="n">s2</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">join</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="p">)</span> <span class="o">//</span> <span class="err">输出</span> <span class="s">&quot;Hello, world&quot;</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>可变形参。<br>
传递至可变形参的值在函数主体内是以适当类型的数组存在的。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">arithmeticMean</span><span class="p">(</span><span class="n">numbers</span><span class="p">:</span> <span class="n">Double</span><span class="o">...</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Double</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">numbers</span> <span class="p">{</span>
</span><span class='line'>        <span class="o">//</span> <span class="n">todo</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>变量形参。<br>
函数的形参默认是常量。试图在函数体内改变函数形参的值会引发一个编译时错误。
可以通过使用变量形参，在函数内得到一个有形参值的变量副本。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">add</span><span class="p">(</span><span class="n">var</span> <span class="n">a</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span><span class="p">{</span>
</span><span class='line'>    <span class="n">a</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">a</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>In-Out形参。<br>
只能传递一个变量作为 in-out 形参对应的实参，变量前加&amp;号。
不能传递一个常量或者字面量作为实参,因为常量和字面量不能被修改。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">swap</span><span class="p">(</span><span class="n">inout</span> <span class="n">a</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">inout</span> <span class="n">b</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">let</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span>
</span><span class='line'>    <span class="n">a</span> <span class="o">=</span> <span class="n">b</span>
</span><span class='line'>    <span class="n">b</span> <span class="o">=</span> <span class="n">temp</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="n">usage</span>
</span><span class='line'><span class="n">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">9</span>
</span><span class='line'><span class="n">swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">)</span>
</span><span class='line'><span class="n">x</span> <span class="o">//</span> <span class="mi">9</span>
</span><span class='line'><span class="n">y</span> <span class="o">//</span> <span class="mi">5</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>嵌套函数。<br>
除了在全局作用域中定义的全局函数外，还可以在函数体内部定义嵌套函数。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">func</span> <span class="n">chooseStepFunction</span><span class="p">(</span><span class="n">backwards</span><span class="p">:</span> <span class="n">Bool</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">func</span> <span class="n">stepForward</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">input</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span>
</span><span class='line'>    <span class="n">func</span> <span class="n">stepBackward</span><span class="p">(</span><span class="nb">input</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">input</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">backwards</span> <span class="err">?</span> <span class="n">stepBackward</span> <span class="p">:</span> <span class="n">stepForward</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2 id="类和结构体">类和结构体</h2>

<p>类和结构体有很多共同点：</p>

<ul>
<li>定义属性用于储存值</li>
<li>定义方法用于提供功能</li>
<li>定义下标用于通过下标语法访问值</li>
<li>定义初始化器用于生成初始化值</li>
<li>通过扩展以增加默认实现的功能</li>
<li>符合协议以对某类提供标准功能</li>
</ul>

<p>与结构体相比,类还有如下的附加功能：</p>

<ul>
<li>继承允许一个类继承另一个类的特征</li>
<li>类型转换允许在运行时检查和解释一个类实例的类型</li>
<li>取消初始化器允许一个类实例释放任何其所被分配的资源</li>
<li>引用计数允许对一个类的多次引用</li>
</ul>

<p>定义：
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">SomeClass</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">//</span> <span class="k">class</span> <span class="nc">definition</span> <span class="n">goes</span> <span class="n">here</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">struct</span> <span class="n">SomeStructure</span> <span class="p">{</span>
</span><span class='line'>    <span class="o">//</span> <span class="n">structure</span> <span class="n">definition</span> <span class="n">goes</span> <span class="n">here</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></p>

<h3 id="结构体">结构体</h3>

<p>结构体有一个自动生成的成员逐一初始化器，用于初始化新结构体实例中的所有成员属性。
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">struct</span> <span class="n">Resolution</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">heigth</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">let</span> <span class="n">vga</span> <span class="o">=</span> <span class="n">Resolution</span><span class="p">(</span><span class="n">width</span><span class="p">:</span><span class="mi">640</span><span class="p">,</span> <span class="n">heigth</span><span class="p">:</span> <span class="mi">480</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></p>

<p>类的示例代码如下，比较值得注意的是：
1. 重载父类方法要用override显示声明
2. 可以在通过willSet、didSet在修改变量值前后获得通知
3. 可以通过get、set给变量设置一个别名，并做一些运算。真心觉得这个应该配上访问权限来使用
<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Shape</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">init</span><span class="p">()</span> <span class="p">{</span> <span class="o">//</span> <span class="err">等价构造函数</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;&lt;Shape&gt; init: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">deinit</span> <span class="p">{</span> <span class="o">//</span> <span class="err">等价析构函数</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;&lt;Shape&gt; deinit: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">var</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">func</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;&lt;Shape&gt; add&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">SonShape</span> <span class="p">:</span> <span class="n">Shape</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">init</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;[Son] init: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">init</span><span class="p">(</span><span class="n">value</span><span class="p">:</span><span class="n">Int</span><span class="p">){</span>
</span><span class='line'>        <span class="nb">super</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="n">value</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;[Son] init with value: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="n">deinit</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">num</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;[Son] deinit: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">func</span> <span class="n">minus</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;[Son] minus: (num)&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="err">重载父类中的函数</span>
</span><span class='line'>    <span class="n">override</span> <span class="n">func</span> <span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">:</span><span class="n">Int</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span><span class="n">Int</span><span class="p">)</span><span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;[Son] add&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">super</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="n">willSet</span><span class="err">、</span><span class="n">ditSet</span><span class="err">只是值设置前的前后处理，</span><span class="n">preAfter</span><span class="err">和</span><span class="n">num</span><span class="err">一样是正常变量，所以可以附值</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">preAfter</span><span class="p">:</span><span class="n">Int</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">willSet</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">println</span><span class="p">(</span><span class="s">&quot;will set (newValue)&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="n">didSet</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">println</span><span class="p">(</span><span class="s">&quot;did set&quot;</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="n">get</span><span class="err">、</span><span class="nb">set</span><span class="err">类似</span><span class="n">wrapper</span><span class="err">或别名，</span><span class="n">triple</span><span class="err">并不是实际存在的变量，所以不能附值</span>
</span><span class='line'>    <span class="n">var</span> <span class="n">triple</span><span class="p">:</span><span class="n">Double</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">get</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">return</span> <span class="n">Double</span><span class="p">(</span><span class="n">num</span><span class="p">)</span><span class="o">*</span> <span class="mi">3</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="nb">set</span> <span class="p">{</span>
</span><span class='line'>             <span class="n">num</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">newValue</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="o">//</span> <span class="n">usage</span>
</span><span class='line'>                   <span class="n">var</span> <span class="n">s</span> <span class="o">=</span> <span class="n">Shape</span><span class="p">();</span>
</span><span class='line'><span class="n">s</span><span class="o">.</span><span class="n">num</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">8</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">var</span> <span class="n">son</span> <span class="o">=</span> <span class="n">SonShape</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="mi">4</span><span class="p">)</span>
</span><span class='line'><span class="n">son</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="mi">9</span><span class="p">)</span>
</span><span class='line'><span class="n">son</span><span class="o">.</span><span class="n">triple</span>
</span><span class='line'><span class="n">son</span><span class="o">.</span><span class="n">triple</span> <span class="o">=</span> <span class="mi">99</span>
</span><span class='line'><span class="n">son</span><span class="o">.</span><span class="n">preAfter</span>
</span><span class='line'><span class="n">son</span><span class="o">.</span><span class="n">preAfter</span> <span class="o">=</span> <span class="mi">10</span>
</span></code></pre></td></tr></table></div></figure></p>

<h2 id="编程小技巧">编程小技巧</h2>

<ol>
<li>断言带可选的说明信息<code>assert(age &gt;= 0, &quot;A person&#39;s age cannot be less than zero&quot;)</code></li>
</ol>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">erik ge</span></span>

      








  


<time datetime="2014-06-26T14:09:50+08:00" pubdate data-updated="true">Jun 26<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/categories/ios/'>iOS</a>
  
</span>


    </p>
    <p class="meta">
        版权声明：自由转载-非商用-非衍生-保持署名 | <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" id="">BY-NC-ND 3.0</a>
    </p>
    <div class="sharing">
    <style>
        .flash-video{display:none;}
    </style>
  
  
  
  

<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
	<span class="jiathis_txt">分享到：</span>
	<a class="jiathis_button_weixin">微信</a>
	<a class="jiathis_button_tsina">新浪微博</a>
	<a class="jiathis_button_tqq">腾讯微博</a>
	<a class="jiathis_button_qzone">QQ空间</a>
	<a class="jiathis_button_douban">豆瓣</a>
	<a class="jiathis_button_xqw">雪球</a>
	<a href="http://www.jiathis.com/share?uid=1923944" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript">
    var jiathis_config = {data_track_clickback:'true'};
    </script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1394075736790327" charset="utf-8"></script>
<!-- JiaThis Button END -->



</div>

    <br />
    


<!-- UY BEGIN -->
<div id="uyan_frame"></div>
<script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1923944"></script>
<!-- UY END -->



    <!-- UJian Button BEGIN -->
<div class="ujian-hook"></div>
<script type="text/javascript">var ujian_config = {num:12,picSize:84,textHeight:45};</script>
<script type="text/javascript" src="http://v1.ujian.cc/code/ujian.js?uid=1923944"></script>
<a href="http://www.ujian.cc" style="border:0;"><img src="http://img.ujian.cc/pixel.png" alt="友荐云推荐" style="border:0;padding:0;margin:0;" /></a>
<!-- UJian Button END -->


    <br />
    <p class="meta">
      
        <a class="basic-alignment left" href="/articles/SwiftCandy" title="Previous Post: Swift语法糖">&laquo; Swift语法糖</a>
      
      
        <a class="basic-alignment right" href="/articles/SwiftTroubles" title="Next Post: Swift的问题">Swift的问题 &raquo;</a>
      
    </p>
  </footer>
</article>


</div>

<aside class="sidebar">
  
    <section id="menuIndex">
    <h1>Contents</h1>
    <script src="/javascripts/article_outline.js" type="text/javascript"></script>
</section>




<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/articles/SwiftTroubles">Swift的问题</a>
      </li>
    
      <li class="post">
        <a href="/articles/SwiftSyntax">Swift的语法细节</a>
      </li>
    
      <li class="post">
        <a href="/articles/SwiftCandy">Swift语法糖</a>
      </li>
    
      <li class="post">
        <a href="/articles/SwiftResSummary">Swift资源汇总</a>
      </li>
    
      <li class="post">
        <a href="/articles/DoubangoGettingStarted">Doubango Getting Started</a>
      </li>
    
  </ul>
</section>
<section>
    <h1>Categories</h1>
    <ul>
        
        
        <li><a class='category' href='/categories/web/'>web (4)</a></li>
        
        
        
        <li><a class='category' href='/categories/life/'>life (1)</a></li>
        
        
        
        <li><a class='category' href='/categories/ios/'>iOS (5)</a></li>
        
        
        
        <li><a class='category' href='/categories/build/'>build (3)</a></li>
        
        
        
        <li><a class='category' href='/categories/webrtc/'>webrtc (1)</a></li>
        
        
    </ul>
</section>






<section>
    <!--a data-type="3" data-tmpl="200x200" data-tmplid="197" data-rd="2" data-style="2" data-border="1" href="#"></a-->
</section>
  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - erik ge -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  <!-- Included file 'disqus.html' not found in _includes directory
Included file 'facebook_like.html' not found in _includes directory
Included file 'google_plus_one.html' not found in _includes directory
Included file 'twitter_sharing.html' not found in _includes directory -->



</body>
</html>
